<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이화 - 서한 시스템</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Design System -->
    <link rel="stylesheet" href="../css/design-system.css">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script>
        function configureTailwind() {
            if (window.tailwind) {
                tailwind.config = {
                    theme: {
                        extend: {
                            colors: {
                                primary: '#3B82F6',
                                secondary: '#64748B',
                                success: '#10B981',
                                warning: '#F59E0B',
                                danger: '#EF4444'
                            }
                        }
                    }
                }
            } else {
                setTimeout(configureTailwind, 100);
            }
        }
        document.addEventListener('DOMContentLoaded', configureTailwind);
        window.NODE_ENV = 'development';
    </script>
</head>

<body>
    <div class="app-layout">
        <!-- Sidebar (공통 컴포넌트) -->
        <aside id="shared-sidebar" class="ds-sidebar"></aside>
        <script src="../js/sidebar.js?v=20260221"></script>

        <!-- Main Content -->
        <div class="app-content">
            <!-- Header -->
            <header class="ds-header">
                <div>
                    <h1 class="ds-header-title">대시보드</h1>
                    <p class="ds-header-subtitle">이화 - 서한 시스템 관리 및 모니터링</p>
                </div>
                <div class="ds-header-actions">
                    <div class="relative">
                        <button class="ds-btn ds-btn-ghost" style="position:relative;">
                            <i class="fas fa-bell"></i>
                            <span class="absolute top-1 right-1 block h-2 w-2 rounded-full bg-red-500"
                                style="animation: ds-fadeIn 2s infinite alternate;"></span>
                        </button>
                    </div>
                </div>
            </header>

            <main class="app-main">
                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 mb-6">
                    <div class="ds-stat-card stat-blue">
                        <div class="flex items-center">
                            <div class="ds-stat-icon icon-blue">
                                <i class="fas fa-cogs"></i>
                            </div>
                            <div class="ml-4">
                                <p class="ds-stat-label">총 파트</p>
                                <p class="ds-stat-value" id="totalParts">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="ds-stat-card stat-green">
                        <div class="flex items-center">
                            <div class="ds-stat-icon icon-green">
                                <i class="fas fa-arrow-down"></i>
                            </div>
                            <div class="ml-4">
                                <p class="ds-stat-label">오늘 입고</p>
                                <p class="ds-stat-value" id="todayInbound">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="ds-stat-card stat-yellow">
                        <div class="flex items-center">
                            <div class="ds-stat-icon icon-yellow">
                                <i class="fas fa-arrow-up"></i>
                            </div>
                            <div class="ml-4">
                                <p class="ds-stat-label">오늘 출고</p>
                                <p class="ds-stat-value" id="todayOutbound">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="ds-stat-card stat-red">
                        <div class="flex items-center">
                            <div class="ds-stat-icon icon-red">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="ml-4">
                                <p class="ds-stat-label">부족 재고</p>
                                <p class="ds-stat-value" id="lowStock">0</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dashboard content placeholder -->
            </main>
        </div>
    </div>

    <!-- Supabase CDN -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

    <script src="../js/config.js?v=20260219"></script>
    <script src="../js/supabase-client.js?v=20260219"></script>
    <script src="../js/admin.js?v=20260219"></script>
    <script>
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleString('en-US', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                timeZone: 'America/Chicago'
            });
            document.getElementById('currentTime').textContent = timeString;
        }

        setInterval(updateTime, 1000);
        updateTime();

        function logout() {
            localStorage.removeItem('authToken');
            localStorage.removeItem('userInfo');
            localStorage.removeItem('userMode');
            window.location.href = '../login.html';
        }

        function loadDashboardData() {
            const totalPartsEl = document.getElementById('totalParts');
            const todayInboundEl = document.getElementById('todayInbound');
            const todayOutboundEl = document.getElementById('todayOutbound');
            const lowStockEl = document.getElementById('lowStock');

            if (totalPartsEl) totalPartsEl.textContent = '1,234';
            if (todayInboundEl) todayInboundEl.textContent = '45';
            if (todayOutboundEl) todayOutboundEl.textContent = '32';
            if (lowStockEl) lowStockEl.textContent = '8';
        }

        loadDashboardData();
    </script>
</body>

</html>